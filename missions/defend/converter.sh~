#!/bin/bash

COUNT=0

#-----------------------------------------------------
#        Evan and Felix Attacking
#-----------------------------------------------------    
echo "converter making test data folder"
mkdir results_dataset
alright=1
count=0
while [[ $alright == 1 ]] ; do
    if [[ -d results/results_EA_FA/test_$count/ ]]
    then
        python log_converter.py results/results_EA_FA/test_$count/felix.alog results_dataset/data_$COUNT.csv attack
	COUNT=$((COUNT+1))
	python log_converter.py results/results_EA_FA/test_$count/evan.alog results_dataset/data_$COUNT.csv attack
        count=$((count+1))
	COUNT=$((COUNT+1))
    else
        alright=0
    fi
done

alright=1
count=0
while [[ $alright == 1 ]] ; do
    if [[ -d results/results_ED_FD/test_$count/ ]]
    then
        python log_converter.py results/results_ED_FD/test_$count/felix.alog results_dataset/data_$COUNT.csv attack
	COUNT=$((COUNT+1))
	python log_converter.py results/results_ED_FD/test_$count/evan.alog results_dataset/data_$COUNT.csv attack
        count=$((count+1))
	COUNT=$((COUNT+1))
    else
        alright=0
    fi
done

alright=1
count=0
while [[ $alright == 1 ]] ; do
    if [[ -d results/results_EA_FD/test_$count/ ]]
    then
        python log_converter.py results/results_EA_FD/test_$count/felix.alog results_dataset/data_$COUNT.csv attack
	COUNT=$((COUNT+1))
	python log_converter.py results/results_EA_FD/test_$count/evan.alog results_dataset/data_$COUNT.csv attack
        count=$((count+1))
	COUNT=$((COUNT+1))
    else
        alright=0
    fi
done

alright=1
count=0
while [[ $alright == 1 ]] ; do
    if [[ -d results/results_ED_FA/test_$count/ ]]
    then
	python log_converter.py results/results_ED_FA/test_$count/felix.alog results_dataset/data_$COUNT.csv attack
	COUNT=$((COUNT+1))
	python log_converter.py results/results_ED_FA/test_$count/evan.alog results_dataset/data_$COUNT.csv attack
        count=$((count+1))
	COUNT=$((COUNT+1))
    else
        alright=0
    fi
done

#merge all the generated files into 1 .csv

alright=1
count=0
while [[ $alright == 1 ]] ; do
    if [[ -f results_dataset/data_$count.csv ]]
    then
	cat results_dataset/data_$count.csv >> results_dataset/data.csv
	rm results_dataset/data_$count.csv
        count=$((count+1))
    else
        alright=0
    fi
done 
